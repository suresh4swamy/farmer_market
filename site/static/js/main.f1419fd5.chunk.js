(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{103:function(e,t,a){e.exports=a.p+"static/media/001.0fb3d867.jpg"},108:function(e,t,a){e.exports=a(222)},113:function(e,t,a){},212:function(e,t,a){},213:function(e,t,a){},214:function(e,t,a){},219:function(e,t,a){},220:function(e,t,a){},222:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(46),i=a.n(o);a(113),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l=a(227),s=a(229),c=a(225),u=a(228),m=(a(114),a(115),a(117),a(11),a(31)),d=a(2),p=a(3),h=a(5),f=a(4),g=a(6),b=r.a.createContext(null),v=r.a.createContext(null),E=function(e){return function(t){return r.a.createElement(v.Consumer,null,function(a){return r.a.createElement(e,Object.assign({},t,{firebase:a}))})}},y=v,C=a(8),O=a(26),N=a.n(O),j=(a(179),a(181),a(223),function(){var e=this;this.getProfile=function(t){e.auth.currentUser&&e.user(e.auth.currentUser.uid).once("value",function(e){t(e.val())})},this.doProfileUpdate=function(t){return e.user(e.auth.currentUser.uid).update(Object(C.a)({},t))}}),k=function(){var e=this,t=function(t,a,n,r){var o=e.storage.ref(),i="string"===typeof a?o.child(a).child(n.name):o.child(n.name),l=n.base64?i.putString(n.base64.replace("data:image/jpeg;base64,",""),"base64",{contentType:"image/jpeg"}):i.put(n);return l.on("state_changed",function(e){var a=e.bytesTransferred/e.totalBytes*100;r(a,t)},function(e){console.log("error uploading file")}),new Promise(function(e,a){l.then(function(a){i.getDownloadURL().then(function(a){e({url:a,id:t})})}),l.catch(function(e){a(e)})})};this.uploadFile=function(a,n){return t.call(e,null,null,a,n)},this.uploadImage=function(a,n,r){return t.call(e,a,"images",n,r)},this.deleteImage=function(t,a){return function(t,a){return console.log("images/"+a),e.storage.ref().child("images/"+a).delete(),new Promise(function(e,a){e(t)})}.call(e,t,a)}},w=function(){var e=this;this.addNewProduct=function(t){return e.product(e.auth.currentUser.uid).push(t)},this.getProducts=function(){return new Promise(function(t,a){e.products().once("value",function(e){t(e.val())})})},this.getMyProducts=function(){return new Promise(function(t,a){e.auth.currentUser?e.product(e.auth.currentUser.uid).once("value",function(e){t(e.val())}):a(new Error("Unauthorised."))})}},S={apiKey:"AIzaSyCfcqEtePmv6RcULmQeEtt82mhGOMupdqU",authDomain:"farmersaleplatfo-1561457656175.firebaseapp.com",databaseURL:"https://farmersaleplatfo-1561457656175.firebaseio.com",projectId:"farmersaleplatfo-1561457656175",storageBucket:"farmersaleplatfo-1561457656175.appspot.com",messagingSenderId:"798114275164",appId:"1:798114275164:web:c5df9369173d7887"},P=function(){function e(){var t=this;Object(d.a)(this,e),this.doCreateUserWithEmailAndPassword=function(e,a){return t.auth.createUserWithEmailAndPassword(e,a)},this.doSignInWithEmailAndPassword=function(e,a){return t.auth.signInWithEmailAndPassword(e,a)},this.doSignInWithGoogle=function(){return t.auth.signInWithPopup(t.googleProvider)},this.doSignInWithFacebook=function(){return t.auth.signInWithPopup(t.facebookProvider)},this.doSignInWithTwitter=function(){return t.auth.signInWithPopup(t.twitterProvider)},this.doSignOut=function(){return t.auth.signOut()},this.doPasswordReset=function(e){return t.auth.sendPasswordResetEmail(e)},this.doSendEmailVerification=function(){return t.auth.currentUser.sendEmailVerification({url:Object({NODE_ENV:"production",PUBLIC_URL:"./site"}).REACT_APP_CONFIRMATION_EMAIL_REDIRECT})},this.doPasswordUpdate=function(e){return t.auth.currentUser.updatePassword(e)},this.getAuthUser=function(){return JSON.parse(localStorage.getItem("authUser"))},this.setAuthUser=function(e){e?localStorage.setItem("authUser",JSON.stringify(e)):localStorage.removeItem("authUser")},this.onAuthUserListener=function(e,a){return t.auth.onAuthStateChanged(function(n){n?t.user(n.uid).on("value",function(t){var a=t.val();a.roles||(a.roles={}),n=Object(C.a)({uid:n.uid,email:n.email,emailVerified:n.emailVerified,providerData:n.providerData},a),e(n)}):a()})},this.user=function(e){return t.db.ref("users/".concat(e))},this.users=function(){return t.db.ref("users")},this.product=function(e){return t.db.ref("product/".concat(e))},this.products=function(){return t.db.ref("product")},this.message=function(e){return t.db.ref("messages/".concat(e))},this.messages=function(){return t.db.ref("messages")},N.a.initializeApp(S),this.serverValue=N.a.database.ServerValue,this.emailAuthProvider=N.a.auth.EmailAuthProvider,this.auth=N.a.auth(),this.db=N.a.database(),this.storage=N.a.storage(),this.attachOtherCollection(),this.googleProvider=new N.a.auth.GoogleAuthProvider,this.facebookProvider=new N.a.auth.FacebookAuthProvider,this.twitterProvider=new N.a.auth.TwitterAuthProvider}return Object(p.a)(e,[{key:"attachOtherCollection",value:function(){j.call(this),w.call(this),k.call(this)}}]),e}(),I=a(64),x={position:"fixed",height:20,width:60,left:0,top:0,right:0,bottom:0,margin:"auto"},U=function(e){var t=function(t){function a(e){var t;return Object(d.a)(this,a),(t=Object(h.a)(this,Object(f.a)(a).call(this,e))).props.firebase.setAuthUser(null),t.state={authUser:null,loading:!0},t}return Object(g.a)(a,t),Object(p.a)(a,[{key:"componentWillMount",value:function(){var e=this;this.listener=this.props.firebase.onAuthUserListener(function(t){e.props.firebase.setAuthUser(t),e.setState({authUser:t,loading:!1})},function(){e.props.firebase.setAuthUser(null),e.state.authUser&&e.setState({authUser:null}),e.setState({loading:!1})})}},{key:"componentWillUnmount",value:function(){this.listener()}},{key:"render",value:function(){return r.a.createElement(b.Provider,{value:this.state.authUser},this.state.loading?r.a.createElement("div",{style:x},r.a.createElement(I.BeatLoader,{color:"#123abc",loading:this.state.loading})):r.a.createElement(e,this.props))}}]),a}(r.a.Component);return E(t)},A=a(12),M=a(230),T=function(e,t){return function(a){var n=function(n){function o(){return Object(d.a)(this,o),Object(h.a)(this,Object(f.a)(o).apply(this,arguments))}return Object(g.a)(o,n),Object(p.a)(o,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var n=this;return r.a.createElement(b.Consumer,null,function(o){return r.a.createElement(r.a.Fragment,null,o&&e(o)?r.a.createElement(a,Object.assign({},n.props,{authUser:o})):t?r.a.createElement(u.a,{to:t}):null)})}}]),o}(r.a.Component);return Object(A.a)(M.a,E)(n)}},D=function(e){var t=function(t){function a(e){var t;return Object(d.a)(this,a),(t=Object(h.a)(this,Object(f.a)(a).call(this,e))).onSendEmailVerification=function(){t.props.firebase.doSendEmailVerification().then(function(){return t.setState({isSent:!0})})},t.state={isSent:!1},t}return Object(g.a)(a,t),Object(p.a)(a,[{key:"render",value:function(){var t=this;return r.a.createElement(b.Consumer,null,function(a){return r.a.createElement(e,t.props)})}}]),a}(r.a.Component);return E(t)},L=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.component,a=Object(m.a)(e,["component"]);return console.log(this.props),r.a.createElement(b.Consumer,null,function(e){return r.a.createElement(c.a,Object.assign({},a,{render:function(a){return R(e)?r.a.createElement(t,a):r.a.createElement(u.a,{to:{pathname:"/signin",state:{from:a.location}}})}}))})}}]),t}(r.a.Component),R=function(e){return!!e},_=L,F=a(226),W=E(function(e){var t=e.firebase;return r.a.createElement("button",{className:"btn btn-primary",type:"button",onClick:t.doSignOut},"Sign Out")}),B="/home",q="ADMIN",H=a(82),K=a.n(H),V=function(){K()("#navbarNav").collapse("hide")},z=function(e){var t=e.authUser;return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark"},r.a.createElement("a",{className:"navbar-brand",href:"/",onClick:function(e){return e.preventDefault()}},"Farmer Market"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNav"},r.a.createElement("ul",{className:"nav navbar-nav"},r.a.createElement("li",{className:"nav-item active"},r.a.createElement(F.a,{className:"nav-link",to:"/",onClick:V},"Landing")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(F.a,{className:"nav-link",to:B,onClick:V},"Home")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(F.a,{className:"nav-link",to:"/account",onClick:V},"Account")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(F.a,{className:"nav-link",to:"/personal-details",onClick:V},"Personal Details")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(F.a,{className:"nav-link",to:"/product",onClick:V},"Products")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(F.a,{className:"nav-link",to:"/my-product",onClick:V},"My Products")),!!t.roles[q]&&r.a.createElement("li",{className:"nav-item"},r.a.createElement(F.a,{className:"nav-link",to:"/admin",onClick:V},"Admin")),r.a.createElement("li",null,r.a.createElement(W,null)))))},G=function(){return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark"},r.a.createElement("a",{className:"navbar-brand",href:"/",onClick:function(e){return e.preventDefault()}},"Farmer Market"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNav"},r.a.createElement("ul",{className:"nav navbar-nav"},r.a.createElement("li",{className:"nav-item active"},r.a.createElement(F.a,{className:"nav-link",to:"/",onClick:V},"Landing")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(F.a,{className:"nav-link",to:"/product",onClick:V},"Product")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(F.a,{className:"nav-link",to:"/signin",onClick:V},"Sign In")))))},J=function(){return r.a.createElement(b.Consumer,null,function(e){return e?r.a.createElement(z,{authUser:e}):r.a.createElement(G,null)})},Q=function(){return console.log("Landing is called."),r.a.createElement("div",null,r.a.createElement("h1",null,"Landing"))},Y=a(20),Z=(a(212),a(103)),$={username:"",email:"",passwordOne:"",passwordTwo:"",isAdmin:!1,error:null},X="auth/email-already-in-use",ee="\n  An account with this E-Mail address already exists.\n  Try to login with this account instead. If you think the\n  account is already used from one of the social logins, try\n  to sign in with one of them. Afterward, associate your accounts\n  on your personal account page.\n",te=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).onSubmit=function(e){var t=a.state,n=t.username,r=t.email,o=t.passwordOne,i=t.isAdmin,l={};i&&(l[q]=q),a.props.firebase.doCreateUserWithEmailAndPassword(r,o).then(function(e){return a.props.firebase.user(e.user.uid).set({username:n,email:r,roles:l})}).then(function(){a.setState(Object(C.a)({},$)),a.props.history.push(B)}).catch(function(e){e.code===X&&(e.message=ee),a.setState({error:e})}),e.preventDefault()},a.onChange=function(e){a.setState(Object(Y.a)({},e.target.name,e.target.value))},a.onChangeCheckbox=function(e){a.setState(Object(Y.a)({},e.target.name,e.target.checked))},a.state=Object(C.a)({},$),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.state,t=e.username,a=e.email,n=e.passwordOne,o=e.passwordTwo,i=e.isAdmin,l=e.error,s=n!==o||""===n||""===a||""===t;return r.a.createElement("div",{className:"container",style:{backgroundImage:"url(".concat(Z,")")}},r.a.createElement("div",{className:"d-flex justify-content-center h-100"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h3",null,"Sign Up")),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("div",{className:"input-group form-group"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text"},r.a.createElement("i",{className:"fas fa-user"}))),r.a.createElement("input",{name:"username",className:"form-control",value:t,onChange:this.onChange,type:"text",placeholder:"Full Name"})),r.a.createElement("div",{className:"input-group form-group"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text"},r.a.createElement("i",{className:"fas fa-envelope"}))),r.a.createElement("input",{name:"email",className:"form-control",value:a,onChange:this.onChange,type:"text",placeholder:"Email Address"})),r.a.createElement("div",{className:"input-group form-group"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text"},r.a.createElement("i",{className:"fas fa-key"}))),r.a.createElement("input",{name:"passwordOne",className:"form-control",value:n,onChange:this.onChange,type:"password",placeholder:"Password"})),r.a.createElement("div",{className:"input-group form-group"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text"},r.a.createElement("i",{className:"fas fa-key"}))),r.a.createElement("input",{name:"passwordTwo",className:"form-control",value:o,onChange:this.onChange,type:"password",placeholder:"Confirm Password"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn float-right login_btn",disabled:s,type:"submit"}," Sign Up ")),l&&r.a.createElement("p",null,l.message)),r.a.createElement("div",{className:"card-footer"},r.a.createElement("label",null," Admin: ",r.a.createElement("input",{name:"isAdmin",type:"checkbox",checked:i,onChange:this.onChangeCheckbox})," "))))))}}]),t}(n.Component),ae=function(){return r.a.createElement("div",{className:"d-flex justify-content-center links"},"Don't have an account?",r.a.createElement(F.a,{to:"/signup"},"Sign Up"))},ne=Object(A.a)(M.a,E)(te),re=function(){return r.a.createElement("div",null,r.a.createElement(ne,null))},oe=(a(213),{email:"",error:null}),ie=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).onSubmit=function(e){var t=a.state.email;a.props.firebase.doPasswordReset(t).then(function(){a.setState(Object(C.a)({},oe))}).catch(function(e){a.setState({error:e})}),e.preventDefault()},a.onChange=function(e){a.setState(Object(Y.a)({},e.target.name,e.target.value))},a.state=Object(C.a)({},oe),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.error,n=""===t;return r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("input",{name:"email",value:this.state.email,onChange:this.onChange,type:"text",placeholder:"Email Address"}),r.a.createElement("button",{disabled:n,type:"submit"},"Reset My Password"),a&&r.a.createElement("p",null,a.message))}}]),t}(n.Component),le=function(){return r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement(F.a,{to:"/pw-forget"},"Forgot Password?"))},se=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"PasswordForget"),r.a.createElement(ce,null))},ce=E(ie),ue=a(103),me=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!1},a.requestSent=function(){a.setState({loading:!0})},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){this.props.firebase.getAuthUser()&&this.props.history.push("/")}},{key:"authorizedRender",value:function(e){return r.a.createElement(u.a,{to:e?e.pathname:"/"})}},{key:"signInRender",value:function(){return r.a.createElement("div",{className:"container",style:{backgroundImage:"url(".concat(ue,")")}},r.a.createElement("div",{className:"d-flex justify-content-center h-100"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h3",null,"Sign In"),r.a.createElement("div",{className:"d-flex justify-content-end social_icon"},r.a.createElement(Ce,null),r.a.createElement(ye,null),r.a.createElement(Oe,null))),r.a.createElement("div",{className:"card-body"},r.a.createElement(Ee,{requestSent:this.requestSent})),r.a.createElement("div",{className:"card-footer"},r.a.createElement(ae,null),r.a.createElement(le,null)),r.a.createElement(I.BarLoader,{css:"\ndisplay: block;\nmargin: 0 auto;\nwidth: 100%;\nborder-color: red;\n",color:"#123abc",loading:this.state.loading}))))}},{key:"render",value:function(){var e=this,t=(this.props.location.state||{from:null}).from;return r.a.createElement(b.Consumer,null,function(a){return a?e.authorizedRender(t):e.signInRender()})}}]),t}(n.Component),de={email:"",password:"",error:null},pe="auth/account-exists-with-different-credential",he="\n\tAn account with an E-Mail address to\n\tthis social account already exists. Try to login from\n\tthis account instead and associate your social accounts on\n\tyour personal account page.\n",fe=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).onSubmit=function(e){var t=a.state,n=t.email,r=t.password;a.props.firebase.doSignInWithEmailAndPassword(n,r).then(function(){a.setState(Object(C.a)({},de))}).catch(function(e){a.setState({error:e})}),a.props.requestSent(),e.preventDefault()},a.onChange=function(e){a.setState(Object(Y.a)({},e.target.name,e.target.value))},a.state=Object(C.a)({},de),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,n=e.error,o=""===a||""===t;return r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("div",{className:"input-group form-group"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text"},r.a.createElement("i",{className:"fas fa-user"}))),r.a.createElement("input",{name:"email",className:"form-control",value:t,onChange:this.onChange,type:"text",placeholder:"Email Address"})),r.a.createElement("div",{className:"input-group form-group"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text"},r.a.createElement("i",{className:"fas fa-key"}))),r.a.createElement("input",{name:"password",className:"form-control",value:a,onChange:this.onChange,type:"password",placeholder:"Password"})),r.a.createElement("div",{className:"row align-items-center remember"},r.a.createElement("input",{type:"checkbox"}),"Remember Me"),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{disabled:o,type:"submit",className:"btn float-right login_btn"},"Sign In")),n&&r.a.createElement("p",null,n.message))}}]),t}(n.Component),ge=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).onSubmit=function(e){a.props.firebase.doSignInWithGoogle().then(function(e){return a.props.firebase.user(e.user.uid).set({username:e.user.displayName,email:e.user.email,roles:{}})}).then(function(){a.setState({error:null}),a.props.history.push(B)}).catch(function(e){e.code===pe&&(e.message=he),a.setState({error:e})}),e.preventDefault()},a.state={error:null},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.state.error;return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{onClick:this.onSubmit},r.a.createElement("i",{className:"fab fa-google-plus-square"})),e&&r.a.createElement("p",null,e.message))}}]),t}(n.Component),be=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).onSubmit=function(e){a.props.firebase.doSignInWithFacebook().then(function(e){return a.props.firebase.user(e.user.uid).set({username:e.additionalUserInfo.profile.name,email:e.additionalUserInfo.profile.email,roles:{}})}).then(function(){a.setState({error:null}),a.props.history.push(B)}).catch(function(e){e.code===pe&&(e.message=he),a.setState({error:e})}),e.preventDefault()},a.state={error:null},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.state.error;return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{onClick:this.onSubmit},r.a.createElement("i",{className:"fab fa-facebook-square"})),e&&r.a.createElement("p",null,e.message))}}]),t}(n.Component),ve=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).onSubmit=function(e){a.props.firebase.doSignInWithTwitter().then(function(e){return a.props.firebase.user(e.user.uid).set({username:e.additionalUserInfo.profile.name,email:e.additionalUserInfo.profile.email,roles:{}})}).then(function(){a.setState({error:null}),a.props.history.push(B)}).catch(function(e){e.code===pe&&(e.message=he),a.setState({error:e})}),e.preventDefault()},a.state={error:null},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.state.error;return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{onClick:this.onSubmit},r.a.createElement("i",{className:"fab fa-twitter-square"})),e&&r.a.createElement("p",null,e.message))}}]),t}(n.Component),Ee=Object(A.a)(M.a,E)(fe),ye=Object(A.a)(M.a,E)(ge),Ce=Object(A.a)(M.a,E)(be),Oe=Object(A.a)(M.a,E)(ve),Ne=E(me),je=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).onToggleEditMode=function(){a.setState(function(e){return{editMode:!e.editMode,editText:a.props.message.text}})},a.onChangeEditText=function(e){a.setState({editText:e.target.value})},a.onSaveEditText=function(){a.props.onEditMessage(a.props.message,a.state.editText),a.setState({editMode:!1})},a.state={editMode:!1,editText:a.props.message.text},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.authUser,a=e.message,n=e.onRemoveMessage,o=this.state,i=o.editMode,l=o.editText;return r.a.createElement("li",null,i?r.a.createElement("input",{type:"text",value:l,onChange:this.onChangeEditText}):r.a.createElement("span",null,r.a.createElement("strong",null,a.userId)," ",a.text,a.editedAt&&r.a.createElement("span",null,"(Edited)")),t.uid===a.userId&&r.a.createElement("span",null,i?r.a.createElement("span",null,r.a.createElement("button",{onClick:this.onSaveEditText},"Save"),r.a.createElement("button",{onClick:this.onToggleEditMode},"Reset")):r.a.createElement("button",{onClick:this.onToggleEditMode},"Edit"),!i&&r.a.createElement("button",{type:"button",onClick:function(){return n(a.uid)}},"Delete")))}}]),t}(n.Component),ke=function(e){var t=e.authUser,a=e.messages,n=e.onEditMessage,o=e.onRemoveMessage;return r.a.createElement("ul",null,a.map(function(e){return r.a.createElement(je,{authUser:t,key:e.uid,message:e,onEditMessage:n,onRemoveMessage:o})}))},we=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).onListenForMessages=function(){a.setState({loading:!0}),a.props.firebase.messages().orderByChild("createdAt").limitToLast(a.state.limit).on("value",function(e){var t=e.val();if(t){var n=Object.keys(t).map(function(e){return Object(C.a)({},t[e],{uid:e})});a.setState({messages:n,loading:!1})}else a.setState({messages:null,loading:!1})})},a.onChangeText=function(e){a.setState({text:e.target.value})},a.onCreateMessage=function(e,t){a.props.firebase.messages().push({text:a.state.text,userId:t.uid,createdAt:a.props.firebase.serverValue.TIMESTAMP}),a.setState({text:""}),e.preventDefault()},a.onEditMessage=function(e,t){e.uid;var n=Object(m.a)(e,["uid"]);a.props.firebase.message(e.uid).set(Object(C.a)({},n,{text:t,editedAt:a.props.firebase.serverValue.TIMESTAMP}))},a.onRemoveMessage=function(e){a.props.firebase.message(e).remove()},a.onNextPage=function(){a.setState(function(e){return{limit:e.limit+5}},a.onListenForMessages)},a.state={text:"",loading:!1,messages:[],limit:5},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.onListenForMessages()}},{key:"componentWillUnmount",value:function(){this.props.firebase.messages().off()}},{key:"render",value:function(){var e=this,t=this.state,a=t.text,n=t.messages,o=t.loading;return r.a.createElement(b.Consumer,null,function(t){return r.a.createElement("div",null,!o&&n&&r.a.createElement("button",{type:"button",onClick:e.onNextPage},"More"),o&&r.a.createElement("div",null,"Loading ..."),n&&r.a.createElement(ke,{authUser:t,messages:n,onEditMessage:e.onEditMessage,onRemoveMessage:e.onRemoveMessage}),!n&&r.a.createElement("div",null,"There are no messages ..."),r.a.createElement("form",{onSubmit:function(a){return e.onCreateMessage(a,t)}},r.a.createElement("input",{type:"text",value:a,onChange:e.onChangeText}),r.a.createElement("button",{type:"submit"},"Send")))})}}]),t}(n.Component),Se=E(we),Pe=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Home Page"),r.a.createElement("p",null,"The Home Page is accessible by every signed in user."),r.a.createElement(Se,null))},Ie={passwordOne:"",passwordTwo:"",error:null},xe=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).onSubmit=function(e){var t=a.state.passwordOne;a.props.firebase.doPasswordUpdate(t).then(function(){a.setState(Object(C.a)({},Ie))}).catch(function(e){a.setState({error:e})}),e.preventDefault()},a.onChange=function(e){a.setState(Object(Y.a)({},e.target.name,e.target.value))},a.state=Object(C.a)({},Ie),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.state,t=e.passwordOne,a=e.passwordTwo,n=e.error,o=t!==a||""===t;return r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("input",{name:"passwordOne",value:t,onChange:this.onChange,type:"password",placeholder:"New Password"}),r.a.createElement("input",{name:"passwordTwo",value:a,onChange:this.onChange,type:"password",placeholder:"Confirm New Password"}),r.a.createElement("button",{disabled:o,type:"submit"},"Reset My Password"),n&&r.a.createElement("p",null,n.message))}}]),t}(n.Component),Ue=E(xe),Ae=[{id:"password",provider:null},{id:"google.com",provider:"googleProvider"},{id:"facebook.com",provider:"facebookProvider"},{id:"twitter.com",provider:"twitterProvider"}],Me=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement(b.Consumer,null,function(e){return r.a.createElement("div",null,r.a.createElement("h1",null,"Account: ",e.email),r.a.createElement(ce,null),r.a.createElement(Ue,null),r.a.createElement(Re,{authUser:e}))})}}]),t}(n.Component),Te=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).fetchSignInMethods=function(){a.props.firebase.auth.fetchSignInMethodsForEmail(a.props.authUser.email).then(function(e){return a.setState({activeSignInMethods:e,error:null})}).catch(function(e){return a.setState({error:e})})},a.onSocialLoginLink=function(e){a.props.firebase.auth.currentUser.linkWithPopup(a.props.firebase[e]).then(a.fetchSignInMethods).catch(function(e){return a.setState({error:e})})},a.onDefaultLoginLink=function(e){var t=a.props.firebase.emailAuthProvider.credential(a.props.authUser.email,e);a.props.firebase.auth.currentUser.linkAndRetrieveDataWithCredential(t).then(a.fetchSignInMethods).catch(function(e){return a.setState({error:e})})},a.onUnlink=function(e){a.props.firebase.auth.currentUser.unlink(e).then(a.fetchSignInMethods).catch(function(e){return a.setState({error:e})})},a.state={activeSignInMethods:[],error:null},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.fetchSignInMethods()}},{key:"render",value:function(){var e=this,t=this.state,a=t.activeSignInMethods,n=t.error;return r.a.createElement("div",null,"Sign In Methods:",r.a.createElement("ul",null,Ae.map(function(t){var n=1===a.length,o=a.includes(t.id);return r.a.createElement("li",{key:t.id},"password"===t.id?r.a.createElement(Le,{onlyOneLeft:n,isEnabled:o,signInMethod:t,onLink:e.onDefaultLoginLink,onUnlink:e.onUnlink}):r.a.createElement(De,{onlyOneLeft:n,isEnabled:o,signInMethod:t,onLink:e.onSocialLoginLink,onUnlink:e.onUnlink}))})),n&&n.message)}}]),t}(n.Component),De=function(e){var t=e.onlyOneLeft,a=e.isEnabled,n=e.signInMethod,o=e.onLink,i=e.onUnlink;return a?r.a.createElement("button",{type:"button",onClick:function(){return i(n.id)},disabled:t},"Deactivate ",n.id):r.a.createElement("button",{type:"button",onClick:function(){return o(n.provider)}},"Link ",n.id)},Le=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).onSubmit=function(e){e.preventDefault(),a.props.onLink(a.state.passwordOne),a.setState({passwordOne:"",passwordTwo:""})},a.onChange=function(e){a.setState(Object(Y.a)({},e.target.name,e.target.value))},a.state={passwordOne:"",passwordTwo:""},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onlyOneLeft,a=e.isEnabled,n=e.signInMethod,o=e.onUnlink,i=this.state,l=i.passwordOne,s=i.passwordTwo,c=l!==s||""===l;return a?r.a.createElement("button",{type:"button",onClick:function(){return o(n.id)},disabled:t},"Deactivate ",n.id):r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("input",{name:"passwordOne",value:l,onChange:this.onChange,type:"password",placeholder:"New Password"}),r.a.createElement("input",{name:"passwordTwo",value:s,onChange:this.onChange,type:"password",placeholder:"Confirm New Password"}),r.a.createElement("button",{disabled:c,type:"submit"},"Link ",n.id))}}]),t}(n.Component),Re=E(Te),_e=Object(A.a)(M.a,D,T(function(e){return!!e}))(Me),Fe=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).state={loading:!1,users:[]},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),this.props.firebase.users().on("value",function(t){var a=t.val(),n=Object.keys(a).map(function(e){return Object(C.a)({},a[e],{uid:e})});e.setState({users:n,loading:!1})})}},{key:"componentWillUnmount",value:function(){this.props.firebase.users().off()}},{key:"render",value:function(){var e=this.state,t=e.users,a=e.loading;return r.a.createElement("div",null,r.a.createElement("h2",null,"Users"),a&&r.a.createElement("div",null,"Loading ..."),r.a.createElement("ul",null,t.map(function(e){return r.a.createElement("li",{key:e.uid},r.a.createElement("span",null,r.a.createElement("strong",null,"ID:")," ",e.uid),r.a.createElement("span",null,r.a.createElement("strong",null,"E-Mail:")," ",e.email),r.a.createElement("span",null,r.a.createElement("strong",null,"Username:")," ",e.username),r.a.createElement("span",null,r.a.createElement(F.a,{to:{pathname:"".concat("/admin","/").concat(e.uid),state:{user:e}}},"Details")))})))}}]),t}(n.Component),We=E(Fe),Be=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).onSendPasswordResetEmail=function(){a.props.firebase.doPasswordReset(a.state.user.email)},a.state=Object(C.a)({loading:!1,user:null},e.location.state),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.state.user||(this.setState({loading:!0}),this.props.firebase.user(this.props.match.params.id).on("value",function(t){e.setState({user:t.val(),loading:!1})}))}},{key:"componentWillUnmount",value:function(){this.props.firebase.user(this.props.match.params.id).off()}},{key:"render",value:function(){var e=this.state,t=e.user,a=e.loading;return r.a.createElement("div",null,r.a.createElement("h2",null,"User (",this.props.match.params.id,")"),a&&r.a.createElement("div",null,"Loading ..."),t&&r.a.createElement("div",null,r.a.createElement("span",null,r.a.createElement("strong",null,"ID:")," ",t.uid),r.a.createElement("span",null,r.a.createElement("strong",null,"E-Mail:")," ",t.email),r.a.createElement("span",null,r.a.createElement("strong",null,"Username:")," ",t.username),r.a.createElement("span",null,r.a.createElement("button",{type:"button",onClick:this.onSendPasswordResetEmail},"Send Password Reset"))))}}]),t}(n.Component),qe=E(Be),He=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Admin"),r.a.createElement("p",null,"The Admin Page is accessible by every signed in admin user."),r.a.createElement(s.a,null,r.a.createElement(c.a,{exact:!0,path:"/admin/:id",component:qe}),r.a.createElement(c.a,{exact:!0,path:"/admin",component:We})))}}]),t}(n.Component),Ke=Object(A.a)(M.a,D,T(function(e){return e&&!!e.roles[q]},"/"))(He),Ve=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"getOptions",value:function(){return this.props.data.map(function(e,t){var a=e.id,n=e.name;return r.a.createElement("option",{key:t,value:a},n)})}},{key:"render",value:function(){var e=this.props,t=e.name,a=e.label,n=e.onChange,o=e.value;return r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:t},a||t),r.a.createElement("select",{className:"form-control",id:t,name:t,onChange:n,value:o},r.a.createElement("option",{value:""},"-"),this.getOptions()))}}]),t}(n.Component);Ve.defaultProps={value:""};var ze=Ve,Ge=a(1),Je=a.n(Ge),Qe=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"getOptions",value:function(){var e=this.props,t=e.name,a=e.data,n=e.onChange,o=e.value;return a.map(function(e,a){var i=e.id,l=e.name;return r.a.createElement("div",{key:i,className:"form-check form-check-inline"},r.a.createElement("input",{className:"form-check-input",type:"radio",name:t,id:i,value:i,onChange:n,checked:o===i}),r.a.createElement("label",{className:"form-check-label",htmlFor:i},l))})}},{key:"render",value:function(){var e=this.props,t=e.name,a=e.label;return r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:t,style:{display:"block"}}," ",a||"Profile Type"),this.getOptions())}}]),t}(n.Component);Qe.propType={data:Je.a.array.isRequired};var Ye=Qe,Ze=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={box:a.props.data},a.handleClick=function(e){var t=a.state.box;t[e].checked=!t[e].checked,a.setState({box:t}),"function"===typeof a.props.onClick&&a.props.onClick(t)},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"getCheckBoxes",value:function(){var e=this;return this.state.box.map(function(t,a){var n=t.id,o=t.name,i=t.checked;return r.a.createElement("div",{key:n,style:{marginRight:15,cursor:"pointer"},className:"form-check form-check-inline",onClick:function(){return e.handleClick(a)}},r.a.createElement("i",{className:i?"fa fa-check-square-o":"fa fa-square-o",style:{marginRight:6},name:n,id:n,"aria-hidden":"true"}," "),r.a.createElement("label",{className:"form-check-label",htmlFor:n},o))})}},{key:"render",value:function(){var e=this.props,t=e.name,a=e.label;return r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:t,style:{display:"block"}}," ",a||"Profile Type"),this.getCheckBoxes())}}]),t}(n.Component);Ze.propType={data:Je.a.array.isRequired};var $e=function(e){var t=e.name,a=e.value,n=e.label,o=e.onChange,i=e.type;return r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:t},n||t),r.a.createElement("textarea",{className:"form-control",name:t,value:a,onChange:o,type:i}))};$e.defaultProps={type:"text"};var Xe=$e,et=function(e){var t=e.name,a=e.value,n=e.label,o=e.onChange,i=e.type,l=e.className,s=void 0===l?"":l,c=Object(m.a)(e,["name","value","label","onChange","type","className"]);return r.a.createElement("div",{className:"form-group "+s},r.a.createElement("label",{htmlFor:t},n||t),r.a.createElement("input",Object.assign({className:"form-control",name:t,value:a,onChange:o,type:i},c)))};et.defaultProps={type:"text"};var tt=et,at=function(e,t){var a=Array.from(e.files);a&&a.length>0&&a.forEach(function(a){var n=new FileReader;n.onload=function(){t(a)},n.readAsDataURL(a,e.files)})},nt=(a(214),function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(h.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(o)))).styles={imgSize:{width:a.props.width,height:a.props.height},p_image:{top:3*a.props.width/4,left:3*a.props.height/4}},a.fileUpload=r.a.createRef(),a.profilePicViewer=r.a.createRef(),a.handleOnUploadError=function(e){console.log("upload error"),console.log(e)},a.openFileMenu=function(){a.fileUpload.current.click()},a.handleChangeFile=function(){at(a.fileUpload.current,a.handleOnLoadComplete)},a.handleOnLoadComplete=function(e,t){a.props.firebase.uploadFile(e,a.props.onChange).catch(a.handleOnUploadError)},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.styles.imgSize;return r.a.createElement("div",null,r.a.createElement("div",{className:"pic_container",style:e},r.a.createElement("div",{className:"circle",style:e},r.a.createElement("img",{ref:this.profilePicViewer,className:"profile-pic rounded-circle",onClick:this.openFileMenu,style:e,alt:"profile picture",src:this.props.src})),r.a.createElement("div",{className:"p-image",style:this.styles.p_image},r.a.createElement("i",{className:"fa fa-camera upload-button",onClick:this.openFileMenu}),r.a.createElement("input",{className:"file-upload",ref:this.fileUpload,onChange:this.handleChangeFile,type:"file",accept:"image/*"}))))}}]),t}(n.Component));nt.defaultProps={width:128,height:128};var rt=nt,ot=a(32),it=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(h.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(o)))).profilePic=r.a.createRef(),a.state={userDetails:{name:"",address:"",state:"IN-TN",profileType:"customer",phone:"",email:"",profile_pic:"https://img.icons8.com/dusk/64/000000/user-male-skin-type-4.png"},statesList:[{id:"IN-AP",name:"Andhra Pradesh"},{id:"IN-AR",name:"Arunachal Pradesh"},{id:"IN-AS",name:"Assam"},{id:"IN-BR",name:"Bihar"},{id:"IN-CT",name:"Chhattisgarh"},{id:"IN-GA",name:"Goa"},{id:"IN-GJ",name:"Gujarat"},{id:"IN-HR",name:"Haryana"},{id:"IN-HP",name:"Himachal Pradesh"},{id:"IN-JK",name:"Jammu and Kashmir"},{id:"IN-JH",name:"Jharkhand"},{id:"IN-KA",name:"Karnataka"},{id:"IN-KL",name:"Kerala"},{id:"IN-MP",name:"Madhya Pradesh"},{id:"IN-MH",name:"Maharashtra"},{id:"IN-MN",name:"Manipur"},{id:"IN-ML",name:"Meghalaya"},{id:"IN-MZ",name:"Mizoram"},{id:"IN-NL",name:"Nagaland"},{id:"IN-OR",name:"Odisha"},{id:"IN-PB",name:"Punjab"},{id:"IN-RJ",name:"Rajasthan"},{id:"IN-SK",name:"Sikkim"},{id:"IN-TN",name:"Tamil Nadu"},{id:"IN-TG",name:"Telangana"},{id:"IN-TR",name:"Tripura"},{id:"IN-UT",name:"Uttarakhand"},{id:"IN-UP",name:"Uttar Pradesh"},{id:"IN-WB",name:"West Bengal"},{id:"IN-AN",name:"Andaman and Nicobar Islands"},{id:"IN-CH",name:"Chandigarh"},{id:"IN-DN",name:"Dadra and Nagar Haveli"},{id:"IN-DD",name:"Daman and Diu"},{id:"IN-DL",name:"Delhi"},{id:"IN-LD",name:"Lakshadweep"},{id:"IN-PY",name:"Puducherry"}],profileTypes:[{id:"seller",name:"Seller"},{id:"customer",name:"Customer"}]},a.getProfile=function(){var e=a.state.userDetails;a.props.firebase.getProfile(function(t){for(var n in t)e[n]=t[n];a.setState({userDetails:e})})},a.handleSubmit=function(e){a.props.firebase.doProfileUpdate(a.state.userDetails).then(function(){ot.a.success("Transaction Successful.")}).catch(function(e){ot.a.error("Transaction Failed.")}),e.preventDefault()},a.handleChange=function(e){var t=e.currentTarget,n=t.name,r=t.value,o=Object(C.a)({},a.state.userDetails);o[n]=r,a.setState({userDetails:o})},a.handleProfilePicChange=function(e){var t=Object(C.a)({},a.state.userDetails);t.profile_pic=e,a.setState({userDetails:t}),console.log("Profile pic uploaded"),console.log(e)},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.getProfile()}},{key:"componentWillReceiveProps",value:function(){this.getProfile()}},{key:"render",value:function(){var e=this.state.userDetails,t=e.name,a=e.address,n=e.state,o=e.profileType,i=e.phone,l=e.email,s=e.profile_pic,c=this.state,u=c.statesList,m=c.profileTypes;return r.a.createElement("form",{style:{maxWidth:"450px",padding:"20px",margin:"auto"},onSubmit:this.handleSubmit},r.a.createElement(rt,{src:s,onChange:this.handleProfilePicChange,firebase:this.props.firebase}),r.a.createElement(tt,{name:"name",label:"Name",value:t,onChange:this.handleChange}),r.a.createElement(tt,{name:"address",label:"Address",value:a,onChange:this.handleChange}),r.a.createElement(ze,{name:"state",label:"Select State",value:n,data:u,onChange:this.handleChange}),r.a.createElement(tt,{name:"phone",label:"Phone number",value:i,onChange:this.handleChange,type:"number"}),r.a.createElement(tt,{name:"email",label:"Email Id",value:l,onChange:this.handleChange,type:"email"}),r.a.createElement(Ye,{name:"profileType",label:"Profile Type",value:o,data:m,onChange:this.handleChange}),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Save"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null))}}]),t}(n.Component),lt=Object(A.a)(M.a,D,T(function(e){return!!e}))(E(it)),st=(a(45),a(85)),ct=a(34),ut=a.n(ct),mt=a(49),dt=a(107),pt=a.n(dt),ht=(a(218),a(219),{unit:"%",x:10,y:10,width:80,height:80}),ft=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={srcImageEl:null,crop:Object(C.a)({},ht)},a.onImageLoaded=function(e){a.setState({srcImageEl:e})},a.onCropComplete=function(e){},a.onCropChange=function(e){a.setState({crop:e})},a.handleCropOkBtn=function(){var e=Object(mt.a)(ut.a.mark(function e(t){var n;return ut.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.makeClientCrop();case 2:n=e.sent,a.setState({crop:Object(C.a)({},ht)}),"function"===typeof a.props.onCropDone&&a.props.onCropDone(n);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.handleCropRotateBtn=function(e){console.log("Crop Rotate button clicked. This feature is not added.")},a.handleCropCancelBtn=function(e){a.setState({crop:Object(C.a)({},ht)}),"function"===typeof a.props.onCropCancel&&a.props.onCropCancel()},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"makeClientCrop",value:function(){var e=Object(mt.a)(ut.a.mark(function e(){var t,a,n,r;return ut.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state,a=t.srcImageEl,n=t.crop,!(a&&n.width&&n.height)){e.next=6;break}return e.next=4,this.getCroppedImg(a,n,"cropped_image.jpeg");case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getCroppedImg",value:function(e,t,a){var n=document.createElement("canvas"),r=e.naturalWidth/e.width,o=e.naturalHeight/e.height;return n.width=t.width,n.height=t.height,n.getContext("2d").drawImage(e,t.x*r,t.y*o,t.width*r,t.height*o,0,0,t.width,t.height),new Promise(function(e,t){e(n.toDataURL("image/jpeg"))})}},{key:"render",value:function(){var e=this.props.src;return r.a.createElement(r.a.Fragment,null,e&&r.a.createElement("div",{className:"imgPopupContainer"},r.a.createElement("div",{className:"imageCropContainer"},r.a.createElement(pt.a,{src:e,crop:this.state.crop,onImageLoaded:this.onImageLoaded,onComplete:this.onCropComplete,onChange:this.onCropChange})),r.a.createElement("div",{className:"imgCropBtnContainer"},r.a.createElement("button",{className:"btn btn-primary",onClick:this.handleCropOkBtn},"OK"),r.a.createElement("button",{className:"btn btn-warning",onClick:this.handleCropRotateBtn},"Rotate"),r.a.createElement("button",{className:"btn btn-info",onClick:this.handleCropCancelBtn},"Cancel"))))}}]),t}(n.Component),gt=(a(220),function(e){return r.a.createElement(bt,e)}),bt=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(h.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(o)))).fileUpload=r.a.createRef(),a.state={images:a.props.data,uploadingImages:[],cropImage:null,cropImageName:"",currentImage:null,fileInputKey:0},a.handleAddImages=function(e){},a.handleDeleteImage=function(){var e=Object(mt.a)(ut.a.mark(function e(t,n){var r,o;return ut.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.stopPropagation(),e.next=3,a.props.firebase.deleteImage(n.id,n.name);case 3:r=e.sent,o=a.state.images.filter(function(e){return e.id!==r}),null,a.setState({currentImage:null,images:o});case 7:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.uploadingProgress=function(e,t){a.setState({uploadingImages:a.state.uploadingImages.map(function(a,n){return a.id===t&&(a.progress=Math.round(e)),a})})},a.uploadedSuccessful=function(e,t){var n=null,r=new Image;r.src=e,r.onload=function(){console.log("Image loaded -- "+t),a.setState({uploadingImages:a.state.uploadingImages.filter(function(e,a){return n=e,e.id!==t})});var r=[].concat(Object(st.a)(a.props.data),[{id:a.props.data.length,path:e,name:n.name}]);"function"===typeof a.props.onChange&&a.props.onChange(e,r),a.setState({images:r})}},a.handleChangeFile=function(e){a.setState({fileInputKey:1===a.state.fileInputKey?0:1});var t=e.currentTarget.files[0].size/1024;if(e.currentTarget.files&&e.currentTarget.files.length&&t<=2048){var n=e.currentTarget.files[0],r=new FileReader;r.onload=function(e){var t=e.target.result;a.setState({cropImage:t,cropImageName:n.name})},r.readAsDataURL(e.currentTarget.files[0]),ot.a.success("Crop the image.")}else ot.a.error("Image size should be within 2 MB.")},a.onCropDone=function(e){var t=(new Date).getTime(),n=a.state.cropImageName.match(/^([\s\S]+)(?=\.)/g).join()+(new Date).getTime()+".jpeg",r=[].concat(Object(st.a)(a.state.uploadingImages),[{id:"upload_"+t,path:e,name:n}]);a.setState({uploadingImages:r,cropImage:null});var o=a.props.firebase.uploadImage("upload_"+t,{name:n,base64:e},a.uploadingProgress);o.then(function(e){a.uploadedSuccessful(e.url,e.id)}),o.catch(function(e){console.log(e)})},a.onCropCancel=function(){a.setState({cropImage:null})},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.setState({images:this.props.data})}},{key:"onSelectImageToShow",value:function(e){this.setState({currentImage:e})}},{key:"render",value:function(){var e=this,t=this.props,a=t.width,n=t.height;return r.a.createElement("div",{className:"imgMainContainer",style:{zIndex:1,position:"relative"}},r.a.createElement("div",{className:"imgListContainer"},r.a.createElement("div",null,this.state.images&&this.state.images.map(function(t){return r.a.createElement("div",{className:"imgContainer",key:t.id,onClick:function(){return e.onSelectImageToShow(t.path)}},r.a.createElement("img",{src:t.path,style:{maxWidth:a,minHeight:n},alt:""}),r.a.createElement("i",{className:"fa fa-trash-o deleteIcon",style:{fontSize:"1.2em"},onClick:function(a){return e.handleDeleteImage(a,t)}}))}),this.state.uploadingImages&&this.state.uploadingImages.map(function(t,o){return r.a.createElement("div",{className:"imgContainer",key:t.id,onClick:function(){return e.onSelectImageToShow(t.path)}},r.a.createElement("img",{src:t.path,style:{maxWidth:a,minHeight:n},alt:""}),r.a.createElement("label",{className:"imageCaption",style:{width:t.progress+"%"}}))}))),this.state.currentImage&&r.a.createElement("div",{className:"currentImageMax"},r.a.createElement("img",{src:this.state.currentImage,alt:""})),this.state.images.length+this.state.uploadingImages.length<5&&r.a.createElement("div",{className:"imgBtnContainer"},r.a.createElement("button",{className:"btn btn-primary",onClick:function(){e.fileUpload.current.click()}},"Add images"),r.a.createElement("input",{className:"file-upload",ref:this.fileUpload,key:this.state.fileInputKey,onChange:this.handleChangeFile,type:"file",accept:"image/*"})),r.a.createElement(ft,{src:this.state.cropImage,onCropDone:this.onCropDone,onCropCancel:this.onCropCancel}))}}]),t}(n.Component);gt.defaultProps={width:"200px",height:"100px"};var vt=E(gt),Et=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("button",{className:"btn btn-primary btn-circle btn-xl add-product-btn",onClick:this.props.onClick},r.a.createElement("i",{className:"fa fa-plus","aria-hidden":"true"}))}}]),t}(n.Component),yt=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={staticImages:[],productDetail:{main_title:"",quantity:"3",price:"0",scale:"",cul_type:"1",locations:"",description:"",pictures:[]},cul_type_list:[{id:"organic",name:"organic"},{id:"trusted",name:"trusted"},{id:"non-organic",name:"non-organic"},{id:"others",name:"others"}]},a.handleSubmit=function(e){e.preventDefault()},a.handleProfilePicChange=function(e){var t=Object(C.a)({},a.state.productDetail);t.profile_pic=e,a.setState({productDetail:t}),console.log("Profile pic uploaded"),console.log(e)},a.handleChange=function(e){var t=e.currentTarget,n=t.name,r=t.value,o=Object(C.a)({},a.state.productDetail);o[n]=r,a.setState({productDetail:o})},a.handleCreateBtn=function(e){a.props.firebase.addNewProduct(a.state.productDetail),a.props.onCreate()},a.handleCancelBtn=function(e){a.props.onCancle()},a.handleUploadChange=function(e,t){var n=t.map(function(e){return e.path}),r=a.state.productDetail,o=(r.pictures,Object(m.a)(r,["pictures"])),i=Object(C.a)({pictures:n},o);a.setState({staticImages:t,productDetail:i})},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(){}},{key:"componentWillUpdate",value:function(){}},{key:"render",value:function(){var e=this.state.productDetail,t=e.main_title,a=e.quantity,n=e.price,o=e.scale,i=e.cul_type,l=e.locations,s=e.description,c=this.state.cul_type_list;return r.a.createElement("form",{className:"create-new-product",style:{maxWidth:"768px",margin:"0 auto"},onSubmit:this.handleSubmit},r.a.createElement("div",{className:"col-12"},r.a.createElement(vt,{data:this.state.staticImages,onChange:this.handleUploadChange}),r.a.createElement(tt,{name:"main_title",label:"Title",value:t,onChange:this.handleChange}),r.a.createElement(Xe,{name:"description",label:"Description",value:s,onChange:this.handleChange}),r.a.createElement("div",{className:"row"},r.a.createElement(tt,{name:"quantity",className:"col-6",type:"number",label:"Quantity",value:a,onChange:this.handleChange}),r.a.createElement(tt,{name:"price",className:"col-6",type:"number",label:"Price \u20b9 - Per Qty",min:"1",value:n,onChange:this.handleChange})),r.a.createElement(tt,{name:"scale",type:"text",label:"Scale / Number - Per Qty",value:o,placeholder:"e.g.:KG",onChange:this.handleChange}),r.a.createElement(ze,{name:"cul_type",label:"Cultivated Type",value:i,data:c,onChange:this.handleChange}),r.a.createElement(Xe,{name:"locations",label:"Available Location",value:l,placeholder:"Product available locations.",onChange:this.handleChange})),r.a.createElement("div",{className:"text-center"},r.a.createElement("button",{type:"button",className:"btn btn-primary btn-circle btn-xl",onClick:this.handleCreateBtn},r.a.createElement("i",{className:"fa fa-check"})),r.a.createElement("button",{type:"button",className:"btn btn-warning btn-circle btn-xl",onClick:this.handleCancelBtn},r.a.createElement("i",{className:"fa fa-times"}))))}}]),t}(n.Component),Ct=function(e){return!!e},Ot=Object(A.a)(T(Ct))(function(e){var t=e.authUser;return console.log(t),r.a.createElement(r.a.Fragment,null,t&&t.profileType&&"seller"===t.profileType.toLowerCase()?r.a.createElement(Et,e):null)}),Nt=Object(A.a)(D,T(Ct))(function(e){var t=e.authUser;return r.a.createElement(r.a.Fragment,null,t&&t.profileType&&"seller"===t.profileType.toLowerCase()?r.a.createElement(yt,e):null)}),jt=function(e){return r.a.createElement("div",Object.assign({className:"cover product-panel"},e))},kt=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"renderPanel",value:function(e){e._id,e.cul_type,e.description,e.locations;var t=e.main_title,a=e.pictures,n=e.price,o=e.quantity;e.scale;return r.a.createElement("div",{className:"cover product-panel"},r.a.createElement("div",{className:"cover-image"},r.a.createElement("div",{className:"cover-image-holder",style:{backgroundImage:"url(".concat(a&&a.length?a[0]:"https://firebasestorage.googleapis.com/v0/b/farmersaleplatfo-1561457656175.appspot.com/o/images%2Fanimal_rip_021563445560264.jpeg?alt=media&token=03513c4a-71a8-451a-b11c-fa7d37ecdad0",")")}})),r.a.createElement("div",{className:"cover-text-holder"},r.a.createElement("div",{className:"cover-text-holder-line"}),r.a.createElement("div",{className:"cover-text-holder-info"},r.a.createElement("span",{className:"bg-success"},"\u20b9 ",n),r.a.createElement("span",{className:"bg-info"},o," - Units")),r.a.createElement("div",{className:"cover-text-holder-title"},t)))}},{key:"render",value:function(){if(console.log(this.props.product),this.props&&this.props.product)return this.renderPanel(this.props.product);return this.renderPanel({_id:"",cul_type:"",description:"",locations:"",main_title:"",pictures:"",price:"",quantity:"",scale:""})}}]),t}(n.Component),wt=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={my_product_list:[]},a.componentDidMount=function(){a.props.authUser&&a.getMyProductList()},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"getMyProductList",value:function(){var e=this;this.props.firebase.getMyProducts().then(function(t){var a=[];for(var n in t)a.push(Object(C.a)({_id:n},t[n]));e.setState({my_product_list:a})}).catch(function(e){console.log(e)})}},{key:"renderMyProductList",value:function(){var e=this.state.my_product_list;return r.a.createElement("div",{className:"my-product-list"},r.a.createElement("div",{className:"my-product-list-title"},"My Product List"),r.a.createElement("div",{className:"list-of-products"},e.map(function(e,t){return r.a.createElement(kt,{key:t,product:e})}),r.a.createElement(jt,null),r.a.createElement(jt,null),r.a.createElement(jt,null),r.a.createElement(jt,null),r.a.createElement(jt,null),r.a.createElement(jt,null),r.a.createElement(jt,null),r.a.createElement(jt,null),r.a.createElement(jt,null),r.a.createElement(jt,null),r.a.createElement(jt,null),r.a.createElement(jt,null),r.a.createElement(jt,null),r.a.createElement(jt,null),r.a.createElement(jt,null),r.a.createElement(jt,null)))}},{key:"render",value:function(){return r.a.createElement("div",null,this.props.authUser&&this.renderMyProductList())}}]),t}(n.Component),St=Object(A.a)(T(function(e){return!!e}))(E(wt)),Pt=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={product_list:[]},a.componentDidMount=function(){a.getProductList()},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"getProductList",value:function(){var e=this;this.props.firebase.getProducts().then(function(t){var a=[];for(var n in t)for(var r in t[n])a.push(Object(C.a)({_id:r},t[n][r]));e.setState({product_list:a})}).catch(function(e){console.log(e)})}},{key:"renderProductList",value:function(){var e=this.state.product_list;return r.a.createElement("div",{className:"product-list"},r.a.createElement("div",{className:"product-list-title"},"Product List"),r.a.createElement("div",{className:"list-of-products"},e.map(function(e,t){return r.a.createElement(kt,{key:t,product:e})}),r.a.createElement(jt,null),r.a.createElement(jt,null),r.a.createElement(jt,null),r.a.createElement(jt,null),r.a.createElement(jt,null),r.a.createElement(jt,null),r.a.createElement(jt,null),r.a.createElement(jt,null),r.a.createElement(jt,null),r.a.createElement(jt,null),r.a.createElement(jt,null),r.a.createElement(jt,null),r.a.createElement(jt,null),r.a.createElement(jt,null),r.a.createElement(jt,null),r.a.createElement(jt,null)))}},{key:"render",value:function(){return r.a.createElement("div",null,this.renderProductList())}}]),t}(n.Component),It=E(Pt),xt=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={showAddNewProduct:!1},a.handleAddNewProductBtn=function(e){var t=!a.state.showAddNewProduct;a.setState({showAddNewProduct:t})},a.createNewProduct={onCancle:function(){a.setState({showAddNewProduct:!1}),console.log("Product creation canceled.")},onCreate:function(){a.setState({showAddNewProduct:!1}),console.log("New product created.")}},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"product-page"},!this.state.showAddNewProduct&&r.a.createElement("div",null,r.a.createElement(It,null)))}}]),t}(n.Component),Ut=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={showAddNewProduct:!1},a.handleAddNewProductBtn=function(e){var t=!a.state.showAddNewProduct;a.setState({showAddNewProduct:t})},a.createNewProduct={onCancle:function(){a.setState({showAddNewProduct:!1}),console.log("Product creation canceled.")},onCreate:function(){a.setState({showAddNewProduct:!1}),console.log("New product created.")}},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"product-page"},!this.state.showAddNewProduct&&r.a.createElement("div",null,r.a.createElement(St,null)),this.state.showAddNewProduct&&r.a.createElement(Nt,this.createNewProduct),!this.state.showAddNewProduct&&r.a.createElement(Ot,{onClick:this.handleAddNewProductBtn}))}}]),t}(n.Component),At=(n.Component,xt);a(221);ot.a.configure();var Mt=U(function(e){return r.a.createElement(l.a,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(J,null),r.a.createElement(s.a,null,r.a.createElement(c.a,{path:"/signup",component:re}),r.a.createElement(c.a,{path:"/signin",component:Ne}),r.a.createElement(c.a,{path:"/pw-forget",component:se}),r.a.createElement(_,{path:B,component:Pe}),r.a.createElement(_,{path:"/account",component:_e}),r.a.createElement(_,{path:"/admin",component:Ke}),r.a.createElement(_,{path:"/personal-details",component:lt}),r.a.createElement(c.a,{path:"/product",component:At}),r.a.createElement(_,{path:"/my-product",component:Ut}),r.a.createElement(c.a,{exact:!0,path:"/",component:Q}),r.a.createElement(c.a,{render:function(){return r.a.createElement(u.a,{to:"/"})}}))))});i.a.render(r.a.createElement(y.Provider,{value:new P},r.a.createElement(Mt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},45:function(e,t,a){}},[[108,1,2]]]);
//# sourceMappingURL=main.f1419fd5.chunk.js.map